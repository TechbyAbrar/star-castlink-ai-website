# run celery worker and celery beat in different terminal

# terminal work
source env/bin/activate
celery -A core worker -l info

# new terminal work
source env/bin/activate
celery -A core beat -l info

# core terminal
# run django as asgi

gunicorn core.asgi:application \
  -k uvicorn.workers.UvicornWorker \
  --workers 4 \
  --threads 2 \
  --bind 0.0.0.0:8001 \
  --timeout 60 \
  --graceful-timeout 30 \
  --keep-alive 5 \
  --max-requests 2000 \
  --max-requests-jitter 200 \
  --access-logfile - \
  --error-logfile - \
  --log-level info



# run redis -> another terminal
redis-server --port 6379

#verify redis
redis-cli ping


# should return: PONG

# port checking
sudo lsof -t -i:8000

#kill port
sudo kill -9 <pid>
